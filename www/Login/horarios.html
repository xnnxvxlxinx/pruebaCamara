<!DOCTYPE HTML>
<html>
<head>
    <title>Mi Ubicaci&oacute;n</title>
     <meta
  name="viewport"
  content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
   
	<link rel="stylesheet" type="text/css" href="../archivosbase/CSS/cabeza.css">
	 <link rel="stylesheet" type="text/css" href="../archivosbase/CSS/estilosinlabel.css">
	 <link rel="stylesheet" type="text/css" href="../archivosbase/CSS/administrar_usuarios.css">
	 	<link rel="stylesheet" type="text/css" href="../archivosbase/CSS/publicacionServicios.css">
	<link rel="stylesheet" type="text/css" href="../archivosbase/CSS/ajax-loader.css">
	<link rel="stylesheet" type="text/css" href="../archivosbase/CSS/mensaje_javascript.css">
    <link rel="shortcut icon" href="../archivosbase/icons/favicon.ico" />
	<script src="../archivosbase/jquerymobile145/jquery-3.2.1.min.js"></script>
 <script src="../archivosbase/jquerymobile145/jquery.mobile-1.4.5.min.js"></script>
 <script type="text/javascript" src="../cordova.js"></script>

   <script type="text/javascript" 
    src="https://maps.google.com/maps/api/js?sensor=false&key=AIzaSyDfGxUMXZLtPNZzXgJ1xioFvsJranjPkiU"> 
</script> 
	<script>
	var UID = localStorage.getItem('SesionID') || '<empty>';
	 
function cerrar(div){		
$("#" + div).fadeOut(150);
}
	function initialize() {
	
	$.get("../archivosbase/cabeza.html", function(htmlexterno){
   $("#cabecera").html(htmlexterno);
    	});
		document.getElementById('InputUID').value=UID;
obtenerLocalesH();
	}
function obtenerLocalesH(){

$.get('https://nirjob.com/PhoneGap/ubicacion/horariosdeatencion.php?ID=' + UID, function(data){
document.getElementById('selectorHorarios').innerHTML=data;
	
});
}
	var NHorariosN=0;
		function seleccionHorarios(){
			
			var div=document.getElementById('horariosAtencion_empresasC');
			var valor=document.getElementById('selectorHorarios').value;
			if(valor==''){
				div.innerHTML='';
			}else{
				$('#ajax-loader').fadeIn(250);
				setTimeout(function(){	
				$.getJSON('https://nirjob.com/Login/consultasphp/HorariosAtencion.php?ID=' + valor, function(data) {		
		var tamanio=data.length;
		
		 NHorariosN=tamanio;
		var texto='';
			for(var i=0; i<tamanio; i++){
				
				if(data[i].ERROR=='0'){
				
				 texto= texto + "<div id='horariosAtencionC_div_"+ i +"'>";	
				 texto= texto + "<label>Dia de Entrada: <select required name='DIA_I[]'>";
				 if(data[i].DIA_I=='Lunes'){
				texto= texto + "<option selected value='Lunes'>Lunes</option>";
				 }else{
					texto= texto + "<option value='Lunes'>Lunes</option>"; 
				 }
				 if(data[i].DIA_I=='Martes'){
				texto= texto + "<option selected value='Martes'>Martes</option>";
				 }else{
					texto= texto + "<option value='Martes'>Martes</option>"; 
				 }
				 if(data[i].DIA_I=='Miercoles'){
				texto= texto + "<option selected value='Miercoles'>Miercoles</option>";
				 }else{
					texto= texto + "<option value='Miercoles'>Miercoles</option>"; 
				 }
				 if(data[i].DIA_I=='Jueves'){
				texto= texto + "<option selected value='Jueves'>Jueves</option>";
				 }else{
					texto= texto + "<option value='Jueves'>Jueves</option>"; 
				 }
				 if(data[i].DIA_I=='Viernes'){
				texto= texto + "<option selected value='Viernes'>Viernes</option>";
				 }else{
					texto= texto + "<option value='Viernes'>Viernes</option>"; 
				 }
				 if(data[i].DIA_I=='S&aacutebado'){
				texto= texto + "<option selected value='S&aacutebado'>S&aacutebado</option>";
				 }else{
					texto= texto + "<option value='S&aacutebado'>S&aacutebado</option>"; 
				 }
				 if(data[i].DIA_I=='Domingo'){
				texto= texto + "<option selected value='Domingo'>Domingo</option>";
				 }else{
					texto= texto + "<option value='Domingo'>Domingo</option>"; 
				 }
				texto= texto + "</select></label></br>";
				 texto= texto + "<label>Dia de Salida: <select required name='DIA_F[]'>";
				 if(data[i].DIA_F=='Lunes'){
				texto= texto + "<option selected value='Lunes'>Lunes</option>";
				 }else{
					texto= texto + "<option value='Lunes'>Lunes</option>"; 
				 }
				 if(data[i].DIA_F=='Martes'){
				texto= texto + "<option selected value='Martes'>Martes</option>";
				 }else{
					texto= texto + "<option value='Martes'>Martes</option>"; 
				 }
				 if(data[i].DIA_F=='Miercoles'){
				texto= texto + "<option selected value='Miercoles'>Miercoles</option>";
				 }else{
					texto= texto + "<option value='Miercoles'>Miercoles</option>"; 
				 }
				 if(data[i].DIA_F=='Jueves'){
				texto= texto + "<option selected value='Jueves'>Jueves</option>";
				 }else{
					texto= texto + "<option value='Jueves'>Jueves</option>"; 
				 }
				 if(data[i].DIA_F=='Viernes'){
				texto= texto + "<option selected value='Viernes'>Viernes</option>";
				 }else{
					texto= texto + "<option value='Viernes'>Viernes</option>"; 
				 }
				 if(data[i].DIA_F=='S&aacutebado'){
				texto= texto + "<option selected value='S&aacutebado'>S&aacutebado</option>";
				 }else{
					texto= texto + "<option value='S&aacutebado'>S&aacutebado</option>"; 
				 }
				 if(data[i].DIA_F=='Domingo'){
				texto= texto + "<option selected value='Domingo'>Domingo</option>";
				 }else{
					texto= texto + "<option value='Domingo'>Domingo</option>"; 
				 }
				texto= texto + "</select></label></br>";
				texto= texto + "<label>Hora de Entrada: <select required name='HORA_I[]'>";
				for(var j=0; j<24; j++){
					if(j<10){
					var horahora='0' + j + ':00';
					}else{
					var horahora=j + ':00';	
					}
				 if(data[i].HORA_I==horahora){
				texto= texto + "<option selected value='"+ horahora +"'>"+ horahora +"</option>";
				 }else{
					texto= texto + "<option value='"+ horahora +"'>"+ horahora +"</option>"; 
				}}
				 texto= texto + "</select></label></br>";
				 texto= texto + "<label>Hora de Salida: <select required name='HORA_F[]'>";
				for(var j=0; j<24; j++){
					if(j<10){
					var horahora='0' + j + ':00';
					}else{
					var horahora=j + ':00';	
					}
				 if(data[i].HORA_F==horahora){
				texto= texto + "<option selected value='"+ horahora +"'>"+ horahora +"</option>";
				 }else{
					texto= texto + "<option value='"+ horahora +"'>"+ horahora +"</option>"; 
				}}
				 texto= texto + "</select></label></br>";
				 texto= texto + "<input type='text' class='oculto' name='ID_Horario[]' required value='"+ data[i].ID + "'>";
				 texto=texto+ '<button type="button" class="cancelar_edit" onclick="borrarHorarioFun(' + data[i].ID +')"></button><br/>';
				 texto= texto + "</div>";	
				}else{
					if(data[i].ERROR!='2'){
					alert('Error: ' + data[i].ERROR + ' en dato: ' + i);	
					}
					
				}
				
			}
		
			texto= texto + "</br><button type='button' onclick='NuevoHorario()'>Nuevo</button>";

			div.innerHTML=texto;
			$('#ajax-loader').fadeOut(250);
			});
			}, 255);
			}
		}
		function NuevoHorario(){
			
		var div=document.getElementById('horariosAtencion_empresasC');
		var indiv = document.createElement('div');
		indiv.id='horariosAtencionC_div_' + NHorariosN;
		var texto='';
			 texto= texto + "<label>Dia de Entrada: <select required name='DIA_I[]'>";
				 
					texto= texto + "<option value='Lunes'>Lunes</option>"; 
				 
				 
					texto= texto + "<option value='Martes'>Martes</option>"; 
				 
				 
					texto= texto + "<option value='Miercoles'>Miercoles</option>"; 
				 
				 
					texto= texto + "<option value='Jueves'>Jueves</option>"; 
				 
				 
					texto= texto + "<option value='Viernes'>Viernes</option>"; 
				 
				 
					texto= texto + "<option value='S&aacutebado'>S&aacutebado</option>"; 
				 
				
					texto= texto + "<option value='Domingo'>Domingo</option>"; 
				 
				texto= texto + "</select></label></br>";
				 texto= texto + "<label>Dia de Salida: <select required name='DIA_F[]'>";
				
					texto= texto + "<option value='Lunes'>Lunes</option>"; 
				 
				
					texto= texto + "<option value='Martes'>Martes</option>"; 
				 
				
					texto= texto + "<option value='Miercoles'>Miercoles</option>"; 
				 
				
					texto= texto + "<option value='Jueves'>Jueves</option>"; 
				 
				 
					texto= texto + "<option value='Viernes'>Viernes</option>"; 
				 
				
					texto= texto + "<option value='S&aacutebado'>S&aacutebado</option>"; 
				 
				 
					texto= texto + "<option value='Domingo'>Domingo</option>"; 
				 
				texto= texto + "</select></label></br>";
				texto= texto + "<label>Hora de Entrada: <select required name='HORA_I[]'>";
				for(var j=0; j<24; j++){
					if(j<10){
					var horahora='0' + j + ':00';
					}else{
					var horahora=j + ':00';	
					}
				
					texto= texto + "<option value='"+ horahora +"'>"+ horahora +"</option>"; 
				}
				 texto= texto + "</select></label></br>";
				 texto= texto + "<label>Hora de Salida: <select required name='HORA_F[]'>";
				for(var j=0; j<24; j++){
					if(j<10){
					var horahora='0' + j + ':00';
					}else{
					var horahora=j + ':00';	
					}
					texto= texto + "<option value='"+ horahora +"'>"+ horahora +"</option>"; 
				}
				 texto= texto + "</select></label></br>";
		texto=texto+ '<button type="button" class="cancelar_edit" onclick="EliminarDiv(\'horariosAtencionC_div_' + NHorariosN +'\')"></button><br/>';
		div.appendChild(indiv);
		document.getElementById('horariosAtencionC_div_' + NHorariosN).innerHTML=texto;
		NHorariosN=NHorariosN+1;
		}
		function borrarHorarioFun(ID){
					document.getElementById('mensaje_javascript').style.display='block';
		$.get('https://nirjob.com/PhoneGap/ubicacion/borrarHorarios.php?IDmen=' + ID, function(texto){
			
			document.getElementById('mensaje_javascript').childNodes[0].innerHTML=texto;
		});
		}
		function cancelarconfiguauario(id){
	document.getElementById(id).style.display='none';
		}
$(function(){
        $("#form_horariosAtencion").on("submit", function(e){
            e.preventDefault();
            var f = $(this);
            var formData = new FormData(document.getElementById("form_horariosAtencion"));
			document.getElementById('ajax-loader').style.display='block';
			setTimeout(function(){
            $.ajax({
                url: "https://nirjob.com/PhoneGap/ubicacion/subirHorarios.php",
                type: "post",
                dataType: "json",
                data: formData,
                cache: false,
                contentType: false,
	     processData: false
            }).done(function(data){
				var tamanio=data.length;
			
				if(data[0].Error=='0' && tamanio==1){
				
				var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Exito al subir sus Horarios.</p>";
texto= texto + "<button type='button' onclick='location.href=\"../index.html\";'>Aceptar</button>";
		mensaje.childNodes[0].innerHTML=texto;
			}else{
			var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Error al subir sus Horarios.</p>";
texto= texto + "<button type='button' onclick='cerrar(\"mensaje_javascript\")'>Regresar</button>";
		mensaje.childNodes[0].innerHTML=texto;
				}
			document.getElementById('ajax-loader').style.display='none';
                });
				
				}, 250);
        
		});
		});	
function borrarBotonF(){
      /*  $("#BorrarHorariosForm").on("submit", function(e){
            e.preventDefault();*/
            var f = $(this);
            var formData = new FormData(document.getElementById("BorrarHorariosForm"));
			document.getElementById('ajax-loader').style.display='block';
			setTimeout(function(){
            $.ajax({
                url: "https://nirjob.com/PhoneGap/ubicacion/borrarHorariosF.php",
                type: "post",
                dataType: "json",
                data: formData,
                cache: false,
                contentType: false,
	     processData: false
            }).done(function(data){
				var tamanio=data.length;
			
				if(data[0].Error=='0' && tamanio==1){
				
				var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Exito al Borrar sus Horarios.</p>";
texto= texto + "<button type='button' onclick='location.href=\"../index.html\";'>Aceptar</button>";
		mensaje.childNodes[0].innerHTML=texto;
			}else{
			var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Error al Borrar sus Horarios.</p>";
texto= texto + "<button type='button' onclick='cerrar(\"mensaje_javascript\")'>Regresar</button>";
		mensaje.childNodes[0].innerHTML=texto;
				}
			document.getElementById('ajax-loader').style.display='none';
                });
				
				}, 250);
        
		/*});*/
		}	
			function EliminarDiv(div1){
	var div = document.getElementById(div1);
    if(div !== null){
        while (div.hasChildNodes()){
            div.removeChild(div.lastChild);
        }
    }else{
        alert ('ERROR');
    }
	}
	</script>
</head>
<body onload='initialize();'>
    <div id="container">
        <div id="cabecera">
        </div>
		<div id='contenido'>
	
		<div class='limpiador'></div>
		<div id='seleccionadorSubirDatos'>
			<div id='horariosAtencion_empresas' >
<form id='form_horariosAtencion' method='post' action=''>
	<select name='selectorHorarios' id='selectorHorarios' required onchange='seleccionHorarios()'>
	</select>
	<div id='horariosAtencion_empresasC'>
		</div>
<input type='text' readonly required style='display:none' value='' name='UID' id='InputUID'/>		
		<input type='submit' name='Horarios_Subir' value='Subir' />
</form>
</div>
		</div>
		 </div>
		<div id='footer'>
		</div>
		<div id='ajax-loader'>
	<img src='../archivosbase/img/ajax-loader.gif'/>
	</div>
	<div id='mensaje_javascript'><div></div></div>
    </div>
</body>
</html>

