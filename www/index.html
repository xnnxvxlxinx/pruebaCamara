<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
  <meta
  name="viewport"
  content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
   
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->
    <link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="archivosbase/CSS/mensaje_javascript.css">
    <title>Nirjob</title>
	<script src="archivosbase/jquerymobile145/jquery-3.2.1.min.js"></script>
 <script src="archivosbase/jquerymobile145/jquery.mobile-1.4.5.min.js"></script>
	<script>
	var conn = false;
	function botongps(){
	checkConnection();
	}
	document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
	document.getElementById('logo').style.top=(screen.height)/3 + 'px';
	initializeT();
	}
	function initializeT(){
	
	
	 cordova.plugins.diagnostic.isLocationEnabled(function(enabled){
//alert(enabled);
if(enabled==true){
		checkConnection();
			}else{
			var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Su GPS no esta activado, para una mejor precision activelo.</p>";
texto= texto + "<button type='button' onclick='botongps(); cerrar(\"mensaje_javascript\");'>Aceptar</button>";

		mensaje.childNodes[0].innerHTML=texto;
			}
}, function(error){alert(error);});
 
  /* setTimeout(function(){
  if(conn==true){
//slideBaby();
 location.href ="servicios.html";
  }else{
 	var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Su dispositivo no esta conectado al Internet.</br>¿Decea intentar conectar de nuevo?</p>";
texto= texto + "<button type='button' onclick='checkConnection(); cerrar(\"mensaje_javascript\");'>Si</button>";
texto= texto + "<button type='button' onclick='cerrar(\"mensaje_javascript\");'>No</button>";
		mensaje.childNodes[0].innerHTML=texto;
  }
  },250);*/
	}
	function cerrar(div){		
$("#" + div).fadeOut(150);
}
	function checkConnection() {
    	$.ajax({
  			url: 'https://nirjob.com/',
  			async: false,
  			data: {'tag' : 'connection'}
  		})
  		.fail(function() {
		var mensaje=document.getElementById('mensaje_javascript');
		mensaje.style.display='block';
var texto="<p>Su dispositivo no esta conectado al Internet.</br>¿Decea intentar conectar de nuevo?</p>";
texto= texto + "<button type='button' onclick='location.href =\"index.html\";'>Si</button>";
texto= texto + "<button type='button' onclick='cerrar(\"mensaje_javascript\");'>No</button>";
		mensaje.childNodes[0].innerHTML=texto;
		 })
  		.done(function() { location.href ="servicios.html"; })
  }
  /*function slideBaby() {

			window.plugins.nativepagetransitions.slide({
    "href" : "servicios.html"
});
          }*/
	</script>
</head>
<body >
	<div id='logo'><img src='archivosbase\img\logo.png' /><p>Nirjob</p></div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    
	<script type="text/javascript">
        //app.initialize();
		
    </script>
	<div id='mensaje_javascript'><div></div></div>
</body>

</html>